conky.config = {
    alignment = "top_right",
    update_interval = 1.0,
    double_buffer = true,

    -- Window setup
    own_window = true,
    own_window_type = "normal",         
    own_window_hints = "undecorated,below,skip_taskbar",
    own_window_transparent = false,      -- disable pseudo transparency
    own_window_argb_visual = true,
    own_window_argb_value = 120,         -- 0 = transparent, 255 = opaque
    own_window_colour = "262626",        -- dark gray background
    border_inner_margin = 8,
    border_outer_margin = 4,

    background = false,
    use_xft = true,
    font = "Fira Code:size=8",
    xftalpha = 0.9,

    -- Layout / look
    gap_x = 40,
    gap_y = 40,
    minimum_width = 200,
    maximum_width = 300,

    draw_shades = false,
    draw_outline = false,
    draw_borders = false,
    draw_graph_borders = false,

    default_color = "white",
    color1 = "grey",
    color2 = "#4fc3f7",   -- accent blue (Plasma style)

    no_buffers = true,
    uppercase = false,
    override_utf8_locale = true,
}

conky.text = [[
${color2}${font Fira Code:bold:size=11}CPU${font}${color}
${color1}Load Total:${color}${alignr}${execbar 8,80 bash -c 'bash ~/.config/conky/max_cpu.sh | sed -n "2p"'}
${color1}Load Max Core: ${color}${alignr}${execbar 8,80 bash -c 'bash ~/.config/conky/max_cpu.sh | head -n 1'}
${color1}Temp:${color}${alignr}${execi 1 ~/.config/conky/cpu_temp.sh}°C

${color2}${font Fira Code:bold:size=11}MEMORY${font}${color}
${color1}RAM:${color}${alignr}${membar 8,80}${if_match "${execi 5 ~/.config/conky/intel_gpu_usage.sh}" != "null"}

${color2}${font Fira Code:bold:size=11}Intel iGPU${font}${color}
${color1}Load:${color} ${alignr}${execbar 8,80 ~/.config/conky/intel_gpu_usage.sh}
${color1}Power:${color} ${alignr}${execi 1 bash -c 'echo "{$(timeout 0.2s intel_gpu_top -J 2>/dev/null | cut -c2-)}" | jq -r ".power.Package"'}W${endif}${if_match ${execi 60 bash -c 'command -v nvidia-smi >/dev/null && echo 1 || echo 0'} == 1}

${color2}${font Fira Code:bold:size=11}Nvidia GPU${font}${color}
${color1}Load: ${color}${alignr}${execbar 8,80 nvidia-smi --query-gpu=utilization.gpu --format=csv,noheader}
${color1}Temp: ${color}${alignr}${execi 1 nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader}°C
${color1}Power: ${color}${execi 1 nvidia-smi --query-gpu=power.draw --format=csv,noheader}${alignr}${execbar 8,80 bash -c 'u=$(nvidia-smi --query-gpu=power.draw --format=csv,noheader,nounits); t=$(nvidia-smi --query-gpu=power.limit --format=csv,noheader,nounits); echo "$u * 100 / $t" | bc -l'}
${color1}VRAM: ${color}${alignr}${execbar 8,80 bash -c 'u=$(nvidia-smi --query-gpu=memory.used --format=csv,noheader,nounits); t=$(nvidia-smi --query-gpu=memory.total --format=csv,noheader,nounits); echo "$u * 100 / $t" | bc -l'}${endif}

${color2}${font Fira Code:bold:size=11}DISK${font}${color}
${execi 1 ~/.config/conky/disk_io.sh}

${color2}${font Fira Code:bold:size=11}NETWORK${font}${color}
${color1}Total Down:${color} ${alignr}${execi 1 ~/.config/conky/net_rx_total.sh}B
${color1}Total Up:${color} ${alignr}${execi 1 ~/.config/conky/net_tx_total.sh}B
]]


